<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Register | TOPCIT Quest</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
</head>
<body>
  <header class="app-header" aria-label="Header">
    <div class="header-top">
      <div class="brand">
        <div class="logo"><a href="index.html"><img class="logo-img" src="topcit-quest-logo.svg" alt="TOPCIT Quest logo"></a></div>
        <div class="titles">
          <h1>TOPCIT Quest</h1>
          <p class="subtitle">Create your account to start the quest</p>
        </div>
      </div>
    </div>
  </header>

  <main class="container auth-center" aria-label="Main">
    <section class="card" style="max-width:720px;">
      <div class="card-head">
        <div class="chip subtle">Join TOPCIT Quest</div>
      </div>
      <h2 style="margin:0 0 8px">Register</h2>
      <p class="topic-desc" style="margin-bottom:16px">Fill in your details below.</p>

      <form id="register-form" novalidate>
        <div class="grid-12" style="gap:12px">
          <label class="span-6">
            <div class="topic-title" style="font-size:13px">Name</div>
            <input type="text" id="reg-name" class="text-input" placeholder="Your name" required />
          </label>
          <label class="span-6">
            <div class="topic-title" style="font-size:13px">Email</div>
            <input type="email" id="reg-email" class="text-input" placeholder="you@example.com" required />
          </label>
          <label class="span-6">
            <div class="topic-title" style="font-size:13px">Phone Number</div>
            <input type="tel" id="reg-phone" class="text-input" placeholder="(555) 123-4567" />
          </label>
          <label class="span-6">
            <div class="topic-title" style="font-size:13px">Password</div>
            <input type="password" id="reg-password" class="text-input" placeholder="••••••••" required />
          </label>
          <label class="span-6">
            <div class="topic-title" style="font-size:13px">Confirm Password</div>
            <input type="password" id="reg-confirm" class="text-input" placeholder="••••••••" required />
          </label>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px">
          <button class="btn primary" type="submit">Create account</button>
          <button class="btn" type="button" id="google-register"><span class="ms icon-inline">account_circle</span> Sign up with Google</button>
        </div>
        <div style="margin-top:12px;color:var(--muted);font-weight:700">
          Already have an account? <a href="login.html" class="btn tiny" style="padding:4px 8px">Login</a>
        </div>
        <div id="register-error" class="topic-desc" style="color:#dc2626;display:none;margin-top:8px">Please fix the highlighted fields.</div>
      </form>
    </section>
  </main>

  <footer class="app-footer">© 2025 Topcit Quest</footer>

  <script>
    function saveUser(user){
      try{ localStorage.setItem('topcit_user', JSON.stringify(user)); }catch(_){}
    }
    function isValidEmail(v){ return /.+@.+\..+/.test(v) }
    document.getElementById('register-form').addEventListener('submit', function(e){
      e.preventDefault();
      const name = document.getElementById('reg-name').value.trim();
      const email = document.getElementById('reg-email').value.trim();
      const phone = document.getElementById('reg-phone').value.trim();
      const pass = document.getElementById('reg-password').value.trim();
      const conf = document.getElementById('reg-confirm').value.trim();
      const err = document.getElementById('register-error');
      err.style.display = 'none';
      if(!name || !isValidEmail(email) || pass.length < 6 || pass !== conf){
        err.style.display = 'block';
        return;
      }
      saveUser({ name, email, phone, provider: 'local' });
      try{ localStorage.setItem('topcit_notice','logged_in'); }catch(_){}
      window.location.href = 'index.html';
    });
    document.getElementById('google-register').addEventListener('click', function(){
      // Placeholder for Google OAuth — simulates a successful registration
      saveUser({ name: 'Google User', email: 'google.user@example.com', provider: 'google' });
      try{ localStorage.setItem('topcit_notice','logged_in'); }catch(_){}
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>