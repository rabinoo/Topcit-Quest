<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login | TOPCIT Quest (Docs)</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet">
</head>
<body>
  <header class="app-header" aria-label="Header">
    <div class="header-top">
      <div class="brand">
        <div class="logo"><a href="index.html"><img class="logo-img" src="topcit-quest-logo.svg" alt="TOPCIT Quest logo"></a></div>
        <div class="titles">
          <h1>TOPCIT Quest</h1>
          <p class="subtitle">Master IT through daily practice and rewards</p>
        </div>
      </div>
    </div>
  </header>

  <main class="container auth-center" aria-label="Main" style="display:grid;place-items:center;min-height:80vh;padding:24px 16px">
    <section class="card" style="max-width:560px;">
      <div class="card-head">
        <div class="chip subtle">Welcome back</div>
      </div>
      <h2 style="margin:0 0 8px">Sign in</h2>
      <p class="topic-desc" style="margin-bottom:16px">Use your account to continue.</p>

      <form id="login-form" novalidate>
        <div style="display:grid;gap:12px">
          <label>
            <div class="topic-title" style="font-size:13px">Username or Email</div>
            <input type="text" id="login-username" class="text-input" placeholder="yourname or you@example.com" required />
          </label>
          <label>
            <div class="topic-title" style="font-size:13px">Password</div>
            <input type="password" id="login-password" class="text-input" placeholder="••••••••" required />
          </label>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px">
          <button class="btn primary" type="submit">Login</button>
          <button class="btn" type="button" id="google-login"><span class="ms icon-inline">account_circle</span> Continue with Google</button>
        </div>
        <div style="margin-top:12px;color:var(--muted);font-weight:700">
          Don't have an account? <a href="register.html" class="btn tiny" style="padding:4px 8px">Register</a>
        </div>
        <div id="login-error" class="topic-desc" style="color:#dc2626;display:none;margin-top:8px">Invalid credentials. Try again.</div>
      </form>
    </section>
  </main>

  <footer class="app-footer">© 2025 Topcit Quest</footer>

  <script>
    function saveUser(user){
      try{ localStorage.setItem('topcit_user', JSON.stringify(user)); }catch(_){}
    }
    function isValid(str){ return typeof str === 'string' && str.trim().length > 0 }
    document.getElementById('login-form').addEventListener('submit', function(e){
      e.preventDefault();
      const u = document.getElementById('login-username').value.trim();
      const p = document.getElementById('login-password').value.trim();
      if(!isValid(u) || !isValid(p)){
        document.getElementById('login-error').style.display = 'block';
        return;
      }
      saveUser({ name: u, email: u.includes('@') ? u : '', provider: 'local' });
      try{ localStorage.setItem('topcit_notice','logged_in'); }catch(_){}
      window.location.href = 'index.html';
    });
    document.getElementById('google-login').addEventListener('click', function(){
      // Placeholder for Google OAuth — simulates a successful login
      saveUser({ name: 'Google User', email: 'google.user@example.com', provider: 'google' });
      try{ localStorage.setItem('topcit_notice','logged_in'); }catch(_){}
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>